<!DOCTYPE html>
<html>
<!--ph·∫ßn ƒë·∫ßu-->
<head>
    <title>Kho</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/2f8895050a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        .list-group.item4 {
            background-color: #001F54;
            color: #FEFCFB !important;
        }
    </style>
</head>
<body>
    <div class="Navigator">
        <div id="title">
            H·ªÜ TH·ªêNG QU·∫¢N L√ù V·∫¨T T∆Ø Y T·∫æ
        </div>
        <div class="list-group">
            <a class="list-group item1" href="Trangchu.html">
                <i class="fa-solid fa-chart-simple"></i>
                T·ªïng quan
            </a>
            <a class="list-group item2" href="Thietbi.html">
                <i class="fa-solid fa-bed"></i>
                Thi·∫øt b·ªã
            </a>
            <a class="list-group item3" href="Baotri_Suachua.html">
                <i class="fa-solid fa-screwdriver-wrench"></i>
                B·∫£o tr√¨ - s·ª≠a ch·ªØa
            </a>
            <a class="list-group item4" href="Kho.html">
                <i class="fa-solid fa-warehouse"></i>
                Kho - chuy·ªÉn thi·∫øt b·ªã
            </a>
            <a class="list-group item5" href="Taichinh-Hopdong.html">
                <i class="fa-solid fa-file-invoice-dollar"></i>
                T√†i ch√≠nh - H·ª£p ƒë·ªìng
            </a>
            <a class="list-group item6" href="Phuluc.html">
                <i class="fa-solid fa-rectangle-list"></i>
                Ph·ª• l·ª•c - Tra c·ª©u m√£
            </a>
        </div>
    </div>
    <div class="Main">
         
        <div class="surgery-schedule">
            <div class="surgery-major">
                <div class="surgery-title">
                    üì¶QU·∫¢N L√ç KHO V√Ä ƒêI·ªÄU CHUY·ªÇN THI·∫æT B·ªä   
                </div>
            </div>
        </div>
        
        <nav class="menu">
            <a href="#thongtin">Th√¥ng tin thi·∫øt b·ªã trong kho</a>
            <a href="#xuatnhap"> Xu·∫•t nh·∫≠p thi·∫øt b·ªã gi·ªØa c√°c kho</a>
            <a href="#dieuchuyen">ƒêi·ªÅu chuy·ªÉn v√† thu h·ªìi</a>
        </nav>  

        <div class="group-container">

            <div class="store">
                <section class="maintain-title" id="thongtin">
                    üì¶Th√¥ng tin thi·∫øt b·ªã trong kho
                </section>
                <input type="text" id="searchInput" placeholder="üîç T√¨m thi·∫øt b·ªã...">
                <table id="deviceTable">
                    <thead>
                    <tr>
                        <th>T√™n thi·∫øt b·ªã</th>
                        <th>S·ªë l∆∞·ª£ng trong kho</th>
                        <th>Ng∆∞·ª°ng t·ªëi thi·ªÉu</th>
                        <th>ƒêi·ªÅu ch·ªânh s·ªë l∆∞·ª£ng</th>
                        <th>Tr·∫°ng th√°i t·ªìn kho</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>M√°y th·ªü PHILIPS</td>
                        <td>12</td>
                        <td>5</td>
                            <td><input type="number" class="adjust-input" value="0"></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>B∆°m ti√™m ƒëi·ªán</td>
                        <td>3</td>
                        <td>5</td>
                        <td><input type="number" class="adjust-input" value="0"></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Monitor theo d√µi</td>
                        <td>0</td>
                        <td>2</td>
                        <td><input type="number" class="adjust-input" value="0"></td>
                        <td></td>
                    </tr>
                    </tbody>
                </table><br>
                <button class="submit-button" onclick="applyAdjustment()">üíæ L∆∞u ƒëi·ªÅu ch·ªânh</button>
                <button class="submit-button" onclick="exportToExcel()">üì• Xu·∫•t Excel </button><br>
            </div>

            <div class="store">
                <section class="maintain-title" id="xuatnhap">
                    üöõ Xu·∫•t nh·∫≠p thi·∫øt b·ªã gi·ªØa c√°c kho
                </section>
                <h3></h3>
                <ul class="function-list">
                    <li>Ghi nh·∫≠n th√¥ng tin thi·∫øt b·ªã nh·∫≠p kho</li>
                    <li>Ghi nh·∫≠n th√¥ng tin thi·∫øt b·ªã xu·∫•t kho</li>
                </ul>
            </div>
            
                <!-- Nh√≥m 3 -->
            <div class="store">
                <section class="maintain-title" id="dieuchuyen">
                    üîÅ ƒêi·ªÅu chuy·ªÉn v√† thu h·ªìi
                </section>
                <ul class="function-list">
                    <li>T·∫°o y√™u c·∫ßu chuy·ªÉn thi·∫øt b·ªã</li>
                    <li>Ghi nh·∫≠n qu√° tr√¨nh ƒëi·ªÅu chuy·ªÉn</li>
                    <li>Qu·∫£n l√Ω thu h·ªìi thi·∫øt b·ªã</li>
                </ul>
            </div>

        </div> 
   
    </div>
    <script>
        // T√¨m ki·∫øm theo t√™n thi·∫øt b·ªã
        document.getElementById("searchInput").addEventListener("keyup", function () {
          const filter = this.value.toUpperCase();
          const rows = document.querySelectorAll("#deviceTable tbody tr");
      
          rows.forEach(row => {
            const cell = row.querySelector("td");
            if (cell && cell.textContent.toUpperCase().indexOf(filter) > -1) {
              row.style.display = "";
            } else {
              row.style.display = "none";
            }
          });
        });
      
        // Xu·∫•t Excel
        function exportToExcel() {
          const table = document.getElementById("deviceTable");
          const wb = XLSX.utils.table_to_book(table, { sheet: "Thi·∫øt b·ªã" });
          XLSX.writeFile(wb, "thiet_bi_ton_kho.xlsx");
        }
      
        // L∆∞u ƒëi·ªÅu ch·ªânh s·ªë l∆∞·ª£ng v√† c·∫≠p nh·∫≠t tr·∫°ng th√°i
        function applyAdjustment() {
          const rows = document.querySelectorAll("#deviceTable tbody tr");
      
          rows.forEach(row => {
            const originalQtyCell = row.cells[1];
            const originalQty = parseInt(originalQtyCell.textContent);
            const threshold = parseInt(row.cells[2].textContent);
            const adjustment = parseInt(row.querySelector(".adjust-input").value) || 0;
            const newQty = originalQty + adjustment;
      
            // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng
            originalQtyCell.textContent = newQty;
      
            // C·∫≠p nh·∫≠t tr·∫°ng th√°i t·ªìn kho
            const statusCell = row.cells[4];
            if (newQty <= 0) {
              statusCell.textContent = "‚õî H·∫øt h√†ng";
              statusCell.className = "status out";
            } else if (newQty <= threshold) {
              statusCell.textContent = "‚ö†Ô∏è S·∫Øp h·∫øt";
              statusCell.className = "status low";
            } else {
              statusCell.textContent = "‚úÖ C√≤n nhi·ªÅu";
              statusCell.className = "status ok";
            }
      
            // Reset √¥ ƒëi·ªÅu ch·ªânh
            row.querySelector(".adjust-input").value = 0;
          });
        }
      
        // T√≠nh tr·∫°ng th√°i t·ªìn kho ban ƒë·∫ßu
        window.addEventListener("DOMContentLoaded", () => {
          const rows = document.querySelectorAll("#deviceTable tbody tr");
      
          rows.forEach(row => {
            const quantity = parseInt(row.cells[1].textContent);
            const threshold = parseInt(row.cells[2].textContent);
            const statusCell = row.cells[4]; // fix ƒë√∫ng c·ªôt tr·∫°ng th√°i
      
            if (quantity === 0) {
              statusCell.textContent = "‚õî H·∫øt h√†ng";
              statusCell.className = "status out";
            } else if (quantity <= threshold) {
              statusCell.textContent = "‚ö†Ô∏è S·∫Øp h·∫øt";
              statusCell.className = "status low";
            } else {
              statusCell.textContent = "‚úÖ C√≤n nhi·ªÅu";
              statusCell.className = "status ok";
            }
          });
        });
    </script>

    
</body>