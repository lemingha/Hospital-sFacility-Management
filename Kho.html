<!DOCTYPE html>
<html>
<!--ph·∫ßn ƒë·∫ßu-->
<head>
    <title>Kho</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="style.css">
    <script src="https://kit.fontawesome.com/2f8895050a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        .list-group.item4 {
            background-color: #001F54;
            color: #FEFCFB !important;
        }
    </style>
</head>
<body>
    <div class="Navigator">
        <div id="title">
            H·ªÜ TH·ªêNG QU·∫¢N L√ù V·∫¨T T∆Ø Y T·∫æ
        </div>
        <div class="list-group">
            <a class="list-group item1" href="Trangchu.html">
                <i class="fa-solid fa-chart-simple"></i>
                T·ªïng quan
            </a>
            <a class="list-group item2" href="Thietbi.html">
                <i class="fa-solid fa-bed"></i>
                Thi·∫øt b·ªã
            </a>
            <a class="list-group item3" href="Baotri_Suachua.html">
                <i class="fa-solid fa-screwdriver-wrench"></i>
                B·∫£o tr√¨ - s·ª≠a ch·ªØa
            </a>
            <a class="list-group item4" href="Kho.html">
                <i class="fa-solid fa-warehouse"></i>
                Kho - chuy·ªÉn thi·∫øt b·ªã
            </a>
            <a class="list-group item5" href="Taichinh-Hopdong.html">
                <i class="fa-solid fa-file-invoice-dollar"></i>
                T√†i ch√≠nh - H·ª£p ƒë·ªìng
            </a>
            <a class="list-group item6" href="Phuluc.html">
                <i class="fa-solid fa-rectangle-list"></i>
                Ph·ª• l·ª•c - Tra c·ª©u m√£
            </a>
        </div>
    </div>
    <div class="Main">
         
        <div class="surgery-schedule">
            <div class="surgery-major">
                <div class="surgery-title">
                    üì¶QU·∫¢N L√ç KHO V√Ä ƒêI·ªÄU CHUY·ªÇN THI·∫æT B·ªä   
                </div>
            </div>
        </div>
        
        <nav class="menu">
            <a href="#thongtin">Th√¥ng tin thi·∫øt b·ªã trong kho</a>
            <a href="#xuatnhap"> Xu·∫•t nh·∫≠p thi·∫øt b·ªã gi·ªØa c√°c kho</a>
            <a href="#dieuchuyen">ƒêi·ªÅu chuy·ªÉn v√† thu h·ªìi</a>
        </nav>  

        <div class="group-container">
            <!--nh√≥m 1-->
            <div class="store">
                <section class="maintain-title" id="thongtin">
                    üì¶Th√¥ng tin thi·∫øt b·ªã trong kho
                </section>
                <input type="text" id="searchInput" placeholder="üîç T√¨m thi·∫øt b·ªã...">
                <table id="deviceTable">
                    <thead>
                    <tr>
                        <th>T√™n thi·∫øt b·ªã</th>
                        <th>S·ªë l∆∞·ª£ng trong kho</th>
                        <th>Ng∆∞·ª°ng t·ªëi thi·ªÉu</th>
                        <th>Tr·∫°ng th√°i t·ªìn kho</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td>M√°y th·ªü PHILIPS</td>
                        <td>12</td>
                        <td>5</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>B∆°m ti√™m ƒëi·ªán</td>
                        <td>3</td>
                        <td>5</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Monitor theo d√µi</td>
                        <td>0</td>
                        <td>2</td>
                        <td></td>
                    </tr>
                    </tbody>
                </table><br>
                <button class="submit-button" onclick="applyAdjustment()">üíæ L∆∞u ƒëi·ªÅu ch·ªânh</button>
                <button class="submit-button" onclick="exportToExcel()">üì• Xu·∫•t Excel </button><br>
            </div>


            <!--nh√≥m 2-->
            <div class="store">
                <section class="maintain-title" id="xuatnhap">
                    üöõ Xu·∫•t nh·∫≠p thi·∫øt b·ªã gi·ªØa c√°c kho
                </section>

                <div class="container">
                    <!-- Card 1: Xu·∫•t nh·∫≠p thi·∫øt b·ªã gi·ªØa c√°c kho -->
                    <div class="function-card">
                    <ul>
                        <li><button onclick="document.getElementById('importModal').style.display='flex'">Ghi nh·∫≠n thi·∫øt b·ªã nh·∫≠p kho</button></li>
                        <li><button onclick="document.getElementById('exportModal').style.display='flex'">Ghi nh·∫≠n thi·∫øt b·ªã xu·∫•t kho</button></li>
                    </ul>
                    </div>

                    <!-- Modal for Import -->
                    <div id="importModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="document.getElementById('importModal').style.display='none'">&times;</span>
                        <h3>Ghi nh·∫≠n thi·∫øt b·ªã nh·∫≠p kho</h3>
                        <form>
                        <div class="input-field">
                            <label for="import-device-name">T√™n thi·∫øt b·ªã:</label>
                            <input type="text" id="import-device-name" placeholder="Nh·∫≠p t√™n thi·∫øt b·ªã">
                        </div><br>
                        <div class="input-field">
                            <label for="import-device-id">M√£ thi·∫øt b·ªã:</label>
                            <input type="text" id="import-device-id" placeholder="Nh·∫≠p m√£ thi·∫øt b·ªã">
                        </div><br>
                        <div class="input-field">
                            <label for="import-quantity">S·ªë l∆∞·ª£ng nh·∫≠p kho:</label>
                            <input type="number" id="import-quantity" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng">
                        </div><br>
                        <div class="input-field">
                            <label for="import-warehouse">Kho nh·∫≠p:</label>
                            <select id="import-warehouse">
                            <option value="warehouse1">Kho 1</option>
                            <option value="warehouse2">Kho 2</option>
                            <option value="warehouse3">Kho 3</option>
                            </select>
                        </div><br>
                        <div class="input-field">
                            <label for="import-date">Ng√†y nh·∫≠p kho:</label>
                            <input type="date" id="import-date">
                        </div><br>
                        <div class="input-field">
                            <label for="import-receiver">Ng∆∞·ªùi nh·∫≠n:</label>
                            <input type="text" id="import-receiver" placeholder="Nh·∫≠p ng∆∞·ªùi nh·∫≠n thi·∫øt b·ªã">
                        </div><br>
                        <button id="popup-button-reschedule" type="submit">Ghi nh·∫≠n</button>
                        </form>
                    </div>
                    </div>

                    <!-- Modal for Export -->
                    <div id="exportModal" class="modal">
                    <div class="modal-content">
                        <span class="close" onclick="document.getElementById('exportModal').style.display='none'">&times;</span>
                        <h3 >Ghi nh·∫≠n thi·∫øt b·ªã xu·∫•t kho</h3>
                        <form>
                        <div class="input-field">
                            <label for="export-device-name">T√™n thi·∫øt b·ªã:</label>
                            <input type="text" id="export-device-name" placeholder="Nh·∫≠p t√™n thi·∫øt b·ªã">
                        </div><br>
                        <div class="input-field">
                            <label for="export-device-id">M√£ thi·∫øt b·ªã:</label>
                            <input type="text" id="export-device-id" placeholder="Nh·∫≠p m√£ thi·∫øt b·ªã">
                        </div><br>
                        <div class="input-field">
                            <label for="export-quantity">S·ªë l∆∞·ª£ng xu·∫•t kho:</label>
                            <input type="number" id="export-quantity" placeholder="Nh·∫≠p s·ªë l∆∞·ª£ng">
                        </div><br>
                        <div class="input-field">
                            <label for="export-warehouse">Kho xu·∫•t:</label>
                            <select id="export-warehouse">
                            <option value="warehouse1">Kho 1</option>
                            <option value="warehouse2">Kho 2</option>
                            <option value="warehouse3">Kho 3</option>
                            </select>
                        </div><br>
                        <div class="input-field">
                            <label for="export-date">Ng√†y xu·∫•t kho:</label>
                            <input type="date" id="export-date">
                        </div><br>
                        <div class="input-field">
                            <label for="export-receiver">Ng∆∞·ªùi nh·∫≠n:</label>
                            <input type="text" id="export-receiver" placeholder="Nh·∫≠p ng∆∞·ªùi nh·∫≠n thi·∫øt b·ªã">
                        </div><br>
                        <button id="popup-button-reschedule" type="submit">Ghi nh·∫≠n</button>
                        </form>
                    </div>
                    </div>
                </div>
            
                <!-- Nh√≥m 3 -->
            <div class="store">
                <section class="maintain-title" id="dieuchuyen">
                    üîÅ ƒêi·ªÅu chuy·ªÉn v√† thu h·ªìi
                </section>
                <ul class="function-list">
                    <li>T·∫°o y√™u c·∫ßu chuy·ªÉn thi·∫øt b·ªã</li>
                    <li>Ghi nh·∫≠n qu√° tr√¨nh ƒëi·ªÅu chuy·ªÉn</li>
                    <li>Qu·∫£n l√Ω thu h·ªìi thi·∫øt b·ªã</li>
                </ul>
            </div>

        </div> 
   
    </div>
    <script>

        window.onclick = function(event) {
        // Ki·ªÉm tra n·∫øu ng∆∞·ªùi d√πng b·∫•m v√†o v√πng ngo√†i modal (t·ª©c l√† ph·∫ßn n·ªÅn m·ªù)
        if (event.target === document.getElementById('exportModal') || 
            event.target === document.getElementById('importModal') || 
            event.target === document.getElementById('historyModal')) {
            event.target.style.display = "none";
        }
        }
        // T√¨m ki·∫øm theo t√™n thi·∫øt b·ªã
        document.getElementById("searchInput").addEventListener("keyup", function () {
          const filter = this.value.toUpperCase();
          const rows = document.querySelectorAll("#deviceTable tbody tr");
      
          rows.forEach(row => {
            const cell = row.querySelector("td");
            if (cell && cell.textContent.toUpperCase().indexOf(filter) > -1) {
              row.style.display = "";
            } else {
              row.style.display = "none";
            }
          });
        });
      
        // Xu·∫•t Excel
        function exportToExcel() {
          const table = document.getElementById("deviceTable");
          const wb = XLSX.utils.table_to_book(table, { sheet: "Thi·∫øt b·ªã" });
          XLSX.writeFile(wb, "thiet_bi_ton_kho.xlsx");
        }
      
        // T√≠nh tr·∫°ng th√°i t·ªìn kho ban ƒë·∫ßu
        window.addEventListener("DOMContentLoaded", () => {
          const rows = document.querySelectorAll("#deviceTable tbody tr");
      
          rows.forEach(row => {
            const quantity = parseInt(row.cells[1].textContent);
            const threshold = parseInt(row.cells[2].textContent);
            const statusCell = row.cells[4]; // fix ƒë√∫ng c·ªôt tr·∫°ng th√°i
      
            if (quantity === 0) {
              statusCell.textContent = "‚õî H·∫øt h√†ng";
              statusCell.className = "status out";
            } else if (quantity <= threshold) {
              statusCell.textContent = "‚ö†Ô∏è S·∫Øp h·∫øt";
              statusCell.className = "status low";
            } else {
              statusCell.textContent = "‚úÖ C√≤n nhi·ªÅu";
              statusCell.className = "status ok";
            }
          });
        });
    </script>

    
</body>